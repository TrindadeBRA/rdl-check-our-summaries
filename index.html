<style>
    #block-component {
        background-color: #f2f2f2;
        padding: 18px;
        border-radius: 16px;
        border: 4px solid #000;
    }

    #block-books {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        justify-content: space-between;
    }

    #block-books .post-item img {
        width: 225px;
        height: 345px;
        object-fit: cover;
    }

    .post-item {
        width: 225px;
    }

    .post-item a{
        text-decoration: none !important;
    }

    .post-item .book-title {
        text-align: center;
        font-size: 12px;
        color: #000;
        text-decoration: none;
    }

    @media only screen and (min-width: 769px) {
        .mobonly {
            display: none !important;
        }
    }

    @media only screen and (max-width: 769px) {
        .deskonly {
            display: none !important;
        }

    }
</style>

<div>
    <div id="block-component">
        <h2 style="margin-bottom: 15px;">Confira todos nossos resumos de livros!</h2>

        <div id="block-books"></div>

    </div>

    <script>

        function submitForm() {
            const endpoinAPI = 'https://cms.resumodolivro.com/wp-json/trinitykit/v1/all-summaries-posts/';

            // Realizar uma requisição HTTP para obter os dados dos livros
            fetch(endpoinAPI)
                .then(response => {
                    // Verificar se a resposta foi bem-sucedida
                    if (!response.ok) {
                        throw new Error('Erro ao obter os dados.');
                    }
                    // Parse do JSON
                    return response.json();
                })
                .then(data => {

                    // console.log(">>>", data.posts)
                    const blockComponent = document.getElementById('block-books');

                    data.posts.forEach(post => {
                        const postDiv = document.createElement('div');

                        postDiv.classList.add('post-item');

                        const link = document.createElement('a');
                        link.href = `/blog/${post.post_slug}`;
                        link.target = "_blank";

                        const image = document.createElement('img');
                        image.src = post.book_cover_url;
                        image.alt = post.book_name;
                        image.classList.add('book-image');

                        link.appendChild(image);

                        postDiv.appendChild(link);

                        const title = document.createElement('p');
                        title.textContent = `"${post.book_name}", escrito por ${post.book_author}`;
                        title.classList.add('book-title');
                        link.appendChild(title);

                        blockComponent.appendChild(postDiv);
                    });

                })
                .catch(error => {
                    console.error('Erro:', error);
                });
        }
        submitForm();


    </script>

</div>